{% extends "layouts/default.njk" %}

{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "govuk/components/input/macro.njk" import govukInput %}
{% from "govuk/components/select/macro.njk" import govukSelect %}

{% block main_content %}
{% set premisesField = ""%}
{% set addressLine1Field = ""%}
{% set townOrCityField = ""%}
{% set countryField = ""%}
{% set postCodeField = ""%}
    {% if errors %}
        {% for error in errors %}
            {% if error.path === "premises" %}
                {% set premisesField = {
                    text: error.msg
                }%}
            {% elseif error.path === "addressLine1" %}
                {% set addressLine1Field = {
                    text: error.msg
                }%}
            {% elseif error.path === "addressLine2" %}
                {% set addressLine2Field = {
                    text: error.msg
                }%}
            {% elseif error.path === "townOrCity" %}
                {% set townOrCityField = {
                    text: error.msg
                }%}
            {% elseif error.path === "county" %}
                {% set countyField = {
                    text: error.msg
                }%}
            {% elseif error.path === "country" %}
                {% set countryField = {
                    text: error.msg
                }%}
            {% elseif error.path === "postCode" %}
                {% set postCodeField = {
                    text: error.msg
                }%}
            {% endif %}
        {% endfor %}
        {% else %}
            {% set errorMessage = undefined %}
    {% endif %}
        <form class="form" action="{{Urls.ENTER_YOUR_DETAILS}}" method="POST">
            <fieldset class="govuk-fieldset">
                <legend class="govuk-fieldset__legend govuk-fieldset__legend--l">
                    <h1 class="govuk-fieldset__heading">
                        {{ title }}
                    </h1>
                </legend>
                <p class="govuk-hint">We may use this to contact you about your account.</p>
                {{ govukInput({
                        label: {
                            text: "Property name or number",
                            classes: "govuk-label"
                        },
                        hint: {
                            text: "For example, 'The Mill', '116' or 'Flat 37a'."
                        },
                        id: "premises",
                        name: "premises",
                        value: address.premises,
                        classes: "{% if premisesField !== '' ? 'govuk-input--error' else '' %}",
                        errorMessage: premisesField
                    }) 
                }}
                {{ govukInput({
                    label: {
                        text: "Address line 1"
                    },
                    classes: "govuk-!-width-full {% if addressLine1Field !== '' ? 'govuk-input--error' else '' %}",
                    id: "address-line-1",
                    name: "addressLine1",
                    value: address.addressLine1,
                    errorMessage: addressLine1Field
                    }) 
                }}
                {{ govukInput({
                    label: {
                        text: "Address line 2(optional)"
                    },
                    classes: "govuk-!-width-full",
                    id: "address-line-2",
                    name: "addressLine2",
                    value: address.addressLine2,
                    errorMessage: addressLine2Field
                    }) 
                }}
                 {{ govukInput({
                    label: {
                        text: "Town or city"
                    },
                    classes: "govuk-!-width-two-thirds {% if townOrCityField !== '' ? 'govuk-input--error' else '' %}",
                    id: "town-or-city",
                    name: "townOrCity",
                    value: address.townOrCity,
                    errorMessage: townOrCityField
                    }) 
                }}
                 {{ govukInput({
                    label: {
                        text: "County (optional)"
                    },
                    classes: "govuk-!-width-two-thirds",
                    id: "county",
                    name: "county",
                    value: address.county,
                    errorMessage: countyField
                    }) 
                }}
                 {{ govukInput({
                    label: {
                        text: "Postcode or zip Code"
                    },
                    classes: "govuk-!-width-one-half {% if postCodeField !== '' ? 'govuk-input--error' else '' %}",
                    id: "post-code",
                    name: "postCode",
                    value: address.postCode,
                    errorMessage: postCodeField
                    }) 
                }}
                {{ govukSelect({
                    id: "country",
                    name: "country",
                    value: address.country,
                    label: {
                        text: "Country"
                    },
                    items: countries,
                    errorMessage: countryField
                    }) 
                }}
                {{ govukButton({
                    text: "Continue",
                    type: "submit",
                    preventDoubleClick: true,
                    classes: "govuk-!-margin-top-2 govuk-!-margin-bottom-8"
                    }) 
                }}
            </fieldset>
        </form>
    {% endblock%}